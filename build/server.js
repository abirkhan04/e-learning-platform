!function(e){var t={};function o(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([function(e,t,o){const n=o(5),s=o(6),r=new n(s.DB,s.USER,s.PASSWORD,{host:s.HOST,dialect:s.dialect,operatorsAliases:!1,pool:{max:s.pool.max,min:s.pool.min,acquire:s.pool.acquire,idle:s.pool.idle}}),i={};i.Sequelize=n,i.sequelize=r,i.articles=o(7)(r,n),e.exports=i},function(e,t,o){const n=o(2),s=o(3),r=o(4),i=o(0),a=n();a.use(n.static(r.join(__dirname,"dist"))),a.use(s.json()),a.use((function(e,t,o){t.header("Access-Control-Allow-Origin","*"),t.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),o()})),a.use(n.static(r.join(__dirname,"dist"))),i.sequelize.sync({force:!1}).then(()=>{console.log("Db droped and synced.")}),o(9)(a),a.get("/",(e,t)=>{t.json({message:"Welcome to JavaWorm Blog Server"})}),a.listen(8080,()=>{console.log("Server is listening on port 8080")})},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("sequelize")},function(e,t){e.exports={HOST:"192.185.4.52",USER:"javaworm_admin",PASSWORD:"ab@209121",DB:"javaworm_blog",dialect:"mysql",pool:{max:5,min:0,acquire:3e4,idle:1e4}}},function(e,t,o){o(8);e.exports=(e,t)=>e.define("article",{uri:{type:t.STRING},lastModifiedAt:{type:t.DATE},published:{type:t.BOOLEAN}})},function(e,t){e.exports=require("sequelize-mock")},function(e,t,o){e.exports=e=>{const t=o(10);e.get("/articles",t.get),e.get("/article/:uri",t.getByUri),e.post("/article",t.post),e.put("/article",t.put),e.delete("/article/:id",t.delete)}},function(e,t,o){const n=o(11),s=o(0),r=o(12),i=s.articles;t.post=(e,t)=>{if(!e.body)return t.status(400).send({message:n.MESSAGE_NOT_EMPTY});const o={};e.body.lastModifiedAt||(e.body.lastModifiedAt=r().format(n.DATE_FORMAT)),Object.assign(o,e.body),i.create(o).then(e=>{t.send(e)}).catch(e=>{t.status(500).send({message:e.message||n.MESSAGE_ERROR})})},t.get=(e,t)=>{i.findAll().then(e=>{t.send(e)}).catch(e=>{t.status(500).send({message:e.message||n.MESSAGE_ERROR})})},t.put=(e,t)=>{0===Object.keys(e.body).length&&t.status(400).send({message:n.MESSAGE_NOT_EMPTY}),e.body.lastModifiedAt||(e.body.lastModifiedAt=r().format(n.DATE_FORMAT)),i.update(e.body,{where:{id:e.body.id}}).then(o=>{1==o?t.send(e.body):t.send({message:n.MESSAGE_NOT_FOUND})}).catch(e=>{t.status(500).send({message:e.message})})},t.delete=(e,t)=>{const o=e.params.id;i.findByPk(o).then(o=>{i.destroy({where:{id:e.params.id}}).then(e=>{1==e&&t.send(o),t.send({message:n.MESSAGE_NOT_FOUND})})})},t.getByUri=(e,t)=>{i.findAll({where:{uri:e.params.uri}}).then(e=>{t.send(e[0])}).catch(e=>{t.status(500).send({message:e.message||n.MESSAGE_ERROR})})}},function(e,t){e.exports={MESSAGE_INSERT:"Inserted Successfully",MESSAGE_ERROR:"Some error occurred while creating the article",MESSAGE_NOT_EMPTY:"Body Can not be Empty",MESSAGE_UPDATE:"Updated Successfully",MESSAGE_NOT_FOUND:"Entity not found",DATE_FORMAT:"L"}},function(e,t){e.exports=require("moment")}]);
//# sourceMappingURL=server.js.map